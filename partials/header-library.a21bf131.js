!function(){var t,e=function(t){try{var e=localStorage.getItem(t);return JSON.parse(e)||void 0}catch(t){console.error("Get state error: ",t)}},n=function(t,e){try{var n=JSON.stringify(e);localStorage.setItem(t,n)}catch(t){console.error("Set state error: ",t)}},a=function(t){try{localStorage.removeItem(t)}catch(t){console.error("Remove state error: ",t)}},i=document.querySelector(".cards__list"),r=document.querySelector(".modal");i.addEventListener("click",(function(i){if(i.preventDefault(),"IMG"!==i.target.nodeName&&"P"!==i.target.nodeName&&"A"!==i.target.nodeName)return;i.stopPropagation(),function(){function t(e){"Escape"===e.code&&(f(),window.removeEventListener("keydown",t))}window.addEventListener("keydown",t)}(),r.classList.add("is-open"),document.body.classList.add("stop-scrolling"),t=i.target.dataset.id;var m=e("watched"),v=e("queue"),_=m.concat(v).find((function(e){return e.id===Number(t)}));(function(n){var a=n.poster_path,i=n.title,o=n.vote_average,u=n.vote_count,f=n.popularity,m=n.original_title,v=n.overview,_=n.genre_ids,p=n.name;n.id;r.innerHTML="\n  <div class='modal__backdrop'></div>\n\n  <div class='modal__container'>\n    <div class='film__image'>\n      <img\n        class='image'\n        src='".concat(function(t){return null===t||"undefined"===t?"https://wipfilms.net/wp-content/data/posters/tt0338683.jpg":"https://www.themoviedb.org/t/p/w500".concat(t)}(a),"'\n        alt='").concat(i||p,"'\n        title=''\n      />\n    </div>\n\n    <div class='film__information'>\n      <div>\n        <h2 class='film__title'>").concat(i||p,"</h2>\n\n        <ul>\n          <li class='film__item'>\n            <p class='film__details'>Vote / Votes</p>\n            <p class='film__info--uper'>\n            <span class='film__rating--orange'>").concat(o.toFixed(1),"</span>\n            <span class='film__rating--divider'> / </span>\n            <span>").concat(u,"</span>\n          </p>\n          </li>\n          <li class='film__item'>\n            <p class='film__details'>Popularity</p>\n            <p class='film__info--uper'>").concat(f,"</p>\n          </li>\n          <li class='film__item'>\n            <p class='film__details'>Original title</p>\n            <p class='film__info--uper'>").concat(m||p,"</p>\n          </li>\n          <li class='film__item'>\n            <p class='film__details'>Genre</p>\n            <p class='film__about__text'>").concat(function(t){var e=[],n="",a=!0,i=!1,r=void 0;try{for(var o,c=function(t,a){var i=a.value;try{var r=localStorage.getItem("genre"),o=JSON.parse(r).find((function(t){return t.id==i}));e.push(o.name||"n/a"),n=e.join(", ")}catch(t){console.error("Set state error: ",t.message)}},s=t[Symbol.iterator]();!(a=(o=s.next()).done);a=!0)c(s,o)}catch(t){i=!0,r=t}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(_),"\n            </p>\n          </li>\n        </ul>\n      </div>\n      <div>\n        <h3 class='film__about__title'>About</h3>\n        <p class='film__about__text'>").concat(v,"\n        </p>\n      </div>\n      <div class='film__button__wrapper'>").concat(function(){(c=e("watched"))&&(s=c);return-1!=s.findIndex((function(e){return e.id===Number(t)}))?'<button type="button" class="film__button btn__watch" data-id="${id}" data-show="false">Remove from watched</button>':'<button type="button" class="film__button btn__watch" data-id="${id}" data-show="true">Add to watched</button>'}(),"\n\n        ").concat(function(){(d=e("queue"))&&(l=d);return-1!=l.findIndex((function(e){return e.id===Number(t)}))?'<button type="button" class="film__button btn__queue" data-id="${id}" data-show="false">Remove from queue</button>':'<button type="button" class="film__button btn__queue" data-id="${id}" data-show="true">Add to queue</button>'}(),'\n      </div>\n      <button\n        type=\'button\'\n        class=\'close__button__modal\'\n        data-action=\'close-modal\'\n      >\n       <svg width="30" height="30" fill="none" xmlns="http://www.w3.org/2000/svg" style="position: absolute"><path d="m8 8 14 14M8 22 22 8" stroke="#000" stroke-width="2"/></svg>\n    </button>\n    </div>\n  </div>\n  ')})(_),document.querySelector(".close__button__modal").addEventListener("click",(function(){return f()})),function(){var t=document.querySelector(".modal__backdrop");function e(n){n.currentTarget===n.target&&(f(),t.removeEventListener("click",e))}t.addEventListener("click",e)}();var h=document.querySelector(".btn__watch"),g=document.querySelector(".btn__queue");h.addEventListener("click",(function(i){var r=i.target;e("watched")||n("watched",[]);"true"===r.getAttribute("data-show")&&(u=_,(c=e("watched"))&&(s=c),-1==s.findIndex((function(e){return e.id===Number(t)}))&&((o=c).push(u),localStorage.setItem("watched",JSON.stringify(o)))),"false"===r.getAttribute("data-show")&&function(i){(c=e("watched"))&&(s=c),a("watched");var r=s.findIndex((function(e){return e.id===Number(t)}));s.splice(r,1),n("watched",s)}(),function(t){"true"===t.getAttribute("data-show")?(t.innerText="Remove from watched",t.setAttribute("data-show","false")):(t.innerText="Add to watched",t.setAttribute("data-show","true"))}(r),p(i);var u})),g.addEventListener("click",(function(i){var r=i.target;e("queue")||n("queue",[]);"true"===r.getAttribute("data-show")&&(o=_,(d=e("queue"))&&(l=d),-1==l.findIndex((function(e){return e.id===Number(t)}))&&((u=d).push(o),localStorage.setItem("queue",JSON.stringify(u)))),"false"===r.getAttribute("data-show")&&function(i){(d=e("queue"))&&(l=d),a("queue");var r=l.findIndex((function(e){return e.id===Number(t)}));l.splice(r,1),n("queue",l)}(),function(t){"true"===t.getAttribute("data-show")?(t.innerText="Remove from queue",t.setAttribute("data-show","false")):(t.innerText="Add to queue",t.setAttribute("data-show","true"))}(r),b(i);var o}))}));var o=[],c=[],s=[];var u=[],d=[],l=[];function f(){r.classList.remove("is-open"),document.body.classList.remove("stop-scrolling")}var m=document.querySelector(".cards__list"),v=document.querySelector(".btnWatched"),_=document.querySelector(".btnQueue");function p(t){t.preventDefault(),m.innerHTML="",v.classList.add("activ"),_.classList.remove("activ");var n=e("watched");h(n)}function b(t){t.preventDefault(),m.innerHTML="",v.classList.remove("activ"),_.classList.add("activ");var n=e("queue");h(n)}function h(t){var e=t.map((function(t){var e=t.title,n=t.name,a=t.poster_path,i=t.genre_ids,r=t.id,o=t.release_date,c=t.first_air_date,s=(o||c||"n/a ").slice(0,4);return'<div class="movie-card">\n                <img width="100%" height="402" class="movie-card__img"\n                src="'.concat(function(t){return null==t?"https://i.pinimg.com/originals/74/3d/b2/743db230d891b47c1d8c66b161111b91.jpg":"https://www.themoviedb.org/t/p/w500".concat(t)}(a),'" alt="" data-id="').concat(r,'"\n                loading="lazy"/>\n\n                <div class="info">\n                    <p class="info-item">\n                        <b>').concat(e||n,'</b>\n                    </p>\n                    <p class="info-item">\n                        <b>').concat(function(t){var e="",n=0,a=JSON.parse(localStorage.getItem("genre")),i=!0,r=!1,o=void 0;try{for(var c,s=function(t,i){var r=i.value,o=a.find((function(t){return r===t.id}));return o?(e&&(e+=", "),2===n?(e+="Others","break"):(n+=1,void(e+=o.name))):"continue"},u=t[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){if("break"===s(u,c))break}}catch(t){r=!0,o=t}finally{try{i||null==u.return||u.return()}finally{if(r)throw o}}e||(e="unknown");return e}(i)," | ").concat(s,"</b>                  \n                </div>\n            </div>")})).join("");m.insertAdjacentHTML("beforeend",e)}v.addEventListener("click",p),_.addEventListener("click",b),function(){m.innerHTML="";var t=e("watched");if(t&&t.length>0)return h(t),void v.classList.add("activ");var n=e("queue");if(n&&n.length>0)return h(n),void _.classList.add("activ");m.innerHTML=' <div class="wrong-box"> <p class="wrong-text">Not Found</p>        \n <img class="img-wrong" src="https://s3.amazonaws.com/stickers.wiki/laughingCStickers/1291222.512.webp"></div>'}()}();
//# sourceMappingURL=header-library.a21bf131.js.map
