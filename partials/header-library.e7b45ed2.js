const t=t=>{try{let e=localStorage.getItem(t);return e=JSON.parse(e)||void 0}catch(t){console.error("Get state error: ",t)}},e=(t,e)=>{try{const n=JSON.stringify(e);localStorage.setItem(t,n)}catch(t){console.error("Set state error: ",t)}},n=t=>{try{localStorage.removeItem(t)}catch(t){console.error("Remove state error: ",t)}},i=document.querySelector(".cards__list"),a=document.querySelector(".modal");let o;i.addEventListener("click",(function(i){if(i.preventDefault(),"IMG"!==i.target.nodeName&&"P"!==i.target.nodeName&&"A"!==i.target.nodeName)return;i.stopPropagation(),function(){function t(e){"Escape"===e.code&&(m(),window.removeEventListener("keydown",t))}window.addEventListener("keydown",t)}(),a.classList.add("is-open"),document.body.classList.add("stop-scrolling"),o=i.target.dataset.id;const _=t("watched"),f=t("queue"),p=_.concat(f).find((t=>t.id===Number(o)));(function({poster_path:e,title:n,vote_average:i,vote_count:s,popularity:d,original_title:m,overview:_,genre_ids:f,name:p,id:b}){a.innerHTML=`\n  <div class='modal__backdrop'></div>\n\n  <div class='modal__container'>\n    <div class='film__image'>\n      <img\n        class='image'\n        src='${function(t){return null===t||"undefined"===t?"https://wipfilms.net/wp-content/data/posters/tt0338683.jpg":`https://www.themoviedb.org/t/p/w500${t}`}(e)}'\n        alt='${n||p}'\n        title=''\n      />\n    </div>\n\n    <div class='film__information'>\n      <div>\n        <h2 class='film__title'>${n||p}</h2>\n\n        <ul>\n          <li class='film__item'>\n            <p class='film__details'>Vote / Votes</p>\n            <p class='film__info--uper'>\n            <span class='film__rating--orange'>${i.toFixed(1)}</span>\n            <span class='film__rating--divider'> / </span>\n            <span>${s}</span>\n          </p>\n          </li>\n          <li class='film__item'>\n            <p class='film__details'>Popularity</p>\n            <p class='film__info--uper'>${d}</p>\n          </li>\n          <li class='film__item'>\n            <p class='film__details'>Original title</p>\n            <p class='film__info--uper'>${m||p}</p>\n          </li>\n          <li class='film__item'>\n            <p class='film__details'>Genre</p>\n            <p class='film__about__text'>${function(t){let e=[],n="";for(const i of t)try{const t=localStorage.getItem("genre"),a=JSON.parse(t).find((t=>t.id==i));e.push(a.name||"n/a"),n=e.join(", ")}catch(t){console.error("Set state error: ",t.message)}return n}(f)}\n            </p>\n          </li>\n        </ul>\n      </div>\n      <div>\n        <h3 class='film__about__title'>About</h3>\n        <p class='film__about__text'>${_}\n        </p>\n      </div>\n      <div class='film__button__wrapper'>${function(){r=t("watched"),r&&(c=r);return-1!=c.findIndex((t=>t.id===Number(o)))?'<button type="button" class="film__button btn__watch" data-id="${id}" data-show="false">Remove from watched</button>':'<button type="button" class="film__button btn__watch" data-id="${id}" data-show="true">Add to watched</button>'}()}\n\n        ${function(){l=t("queue"),l&&(u=l);return-1!=u.findIndex((t=>t.id===Number(o)))?'<button type="button" class="film__button btn__queue" data-id="${id}" data-show="false">Remove from queue</button>':'<button type="button" class="film__button btn__queue" data-id="${id}" data-show="true">Add to queue</button>'}()}\n      </div>\n      <button\n        type='button'\n        class='close__button__modal'\n        data-action='close-modal'\n      >\n       <svg width="30" height="30" fill="none" xmlns="http://www.w3.org/2000/svg" style="position: absolute"><path d="m8 8 14 14M8 22 22 8" stroke="#000" stroke-width="2"/></svg>\n    </button>\n    </div>\n  </div>\n  `})(p),document.querySelector(".close__button__modal").addEventListener("click",(()=>m())),function(){const t=document.querySelector(".modal__backdrop");function e(n){n.currentTarget===n.target&&(m(),t.removeEventListener("click",e))}t.addEventListener("click",e)}();const g=document.querySelector(".btn__watch"),h=document.querySelector(".btn__queue");g.addEventListener("click",(function(i){const a=i.target;t("watched")||e("watched",[]);"true"===a.getAttribute("data-show")&&(d=p,r=t("watched"),r&&(c=r),-1==c.findIndex((t=>t.id===Number(o)))&&(s=r,s.push(d),localStorage.setItem("watched",JSON.stringify(s)))),"false"===a.getAttribute("data-show")&&function(i){r=t("watched"),r&&(c=r),n("watched");let a=c.findIndex((t=>t.id===Number(o)));c.splice(a,1),e("watched",c)}(),function(t){"true"===t.getAttribute("data-show")?(t.innerText="Remove from watched",t.setAttribute("data-show","false")):(t.innerText="Add to watched",t.setAttribute("data-show","true"))}(a),b(i);var d})),h.addEventListener("click",(function(i){const a=i.target;t("queue")||e("queue",[]);"true"===a.getAttribute("data-show")&&(s=p,l=t("queue"),l&&(u=l),-1==u.findIndex((t=>t.id===Number(o)))&&(d=l,d.push(s),localStorage.setItem("queue",JSON.stringify(d)))),"false"===a.getAttribute("data-show")&&function(i){l=t("queue"),l&&(u=l),n("queue");let a=u.findIndex((t=>t.id===Number(o)));u.splice(a,1),e("queue",u)}(),function(t){"true"===t.getAttribute("data-show")?(t.innerText="Remove from queue",t.setAttribute("data-show","false")):(t.innerText="Add to queue",t.setAttribute("data-show","true"))}(a),v(i);var s}))}));let s=[],r=[],c=[];let d=[],l=[],u=[];function m(){a.classList.remove("is-open"),document.body.classList.remove("stop-scrolling")}const _=document.querySelector(".cards__list"),f=document.querySelector(".btnWatched"),p=document.querySelector(".btnQueue");function b(e){e.preventDefault(),_.innerHTML="",f.classList.add("activ"),p.classList.remove("activ");const n=t("watched");g(n)}function v(e){e.preventDefault(),_.innerHTML="",f.classList.remove("activ"),p.classList.add("activ");const n=t("queue");g(n)}function g(t){const e=t.map((({title:t,name:e,poster_path:n,genre_ids:i,id:a,release_date:o,first_air_date:s})=>{let r=(o||s||"n/a ").slice(0,4);return`<div class="movie-card">\n                <img width="100%" height="402" class="movie-card__img"\n                src="${function(t){return null==t?"https://i.pinimg.com/originals/74/3d/b2/743db230d891b47c1d8c66b161111b91.jpg":`https://www.themoviedb.org/t/p/w500${t}`}(n)}" alt="" data-id="${a}"\n                loading="lazy"/>\n\n                <div class="info">\n                    <p class="info-item">\n                        <b>${t||e}</b>\n                    </p>\n                    <p class="info-item">\n                        <b>${function(t){let e="",n=0;const i=JSON.parse(localStorage.getItem("genre"));for(const a of t){const t=i.find((t=>a===t.id));if(t){if(e&&(e+=", "),2===n){e+="Others";break}n+=1,e+=t.name}}e||(e="unknown");return e}(i)} | ${r}</b>                  \n                </div>\n            </div>`})).join("");_.insertAdjacentHTML("beforeend",e)}f.addEventListener("click",b),p.addEventListener("click",v),function(){_.innerHTML="";let e=t("watched");if(e&&e.length>0)return g(e),void f.classList.add("activ");let n=t("queue");if(n&&n.length>0)return g(n),void p.classList.add("activ");_.innerHTML=' <div class="wrong-box"> <p class="wrong-text">Not Found</p>        \n <img class="img-wrong" src="https://s3.amazonaws.com/stickers.wiki/laughingCStickers/1291222.512.webp"></div>'}();
//# sourceMappingURL=header-library.e7b45ed2.js.map
