{"mappings":"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","sources":["src/js/gallery/local-st-load-remove-save.js","src/js/gallery/modal-for-library.js","src/js/library.js"],"sourcesContent":["// Принимает ключ `key` по которому будет произведена выборка.\nconst load = key => {\n  try {\n    let serializedState = localStorage.getItem(key);\n\n    return (serializedState = JSON.parse(serializedState) || undefined);\n  } catch (err) {\n    console.error('Get state error: ', err);\n  }\n};\n\n// Принимает ключ `key` и значение `value`.\nconst save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (err) {\n    console.error('Set state error: ', err);\n  }\n};\n\n// Принимает ключ `key`\nconst remove = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (err) {\n    console.error('Remove state error: ', err);\n  }\n};\n\nexport { load, save, remove };\n","import { load, save, remove } from './local-st-load-remove-save';\nimport { showListWatched } from '../library';\nimport { showListQueue } from '../library';\n\nconst galleryFilm = document.querySelector('.cards__list');\nconst modalEl = document.querySelector('.modal');\n\ngalleryFilm.addEventListener('click', onOpenModal);\nlet movie_id;\n// Ф-ція відкриття модалки\nfunction onOpenModal(evt) {\n  evt.preventDefault();\n  if (\n    evt.target.nodeName !== 'IMG' &&\n    evt.target.nodeName !== 'P' &&\n    evt.target.nodeName !== 'A'\n  ) {\n    return;\n  }\n\n  evt.stopPropagation();\n  closeEsc();\n  modalEl.classList.add('is-open');\n\n  document.body.classList.add('stop-scrolling');\n\n  // const movie_id = evt.target.dataset.id;\n  movie_id = evt.target.dataset.id;\n\n  // ____________local st----закидаєм картку фільму в LS\n\n  const watchListJson = load('watched');\n  const queueListJson = load('queue');\n\n  const filmForLibrary = watchListJson.concat(queueListJson);\n\n  const oneFilmById = filmForLibrary.find(film => film.id === Number(movie_id));\n\n  // ____________local st----\n\n  murckupCard(oneFilmById);\n  closeBtn();\n  backdropClose();\n\n  // --------test-btn--------------\n  const btnWatchEl = document.querySelector('.btn__watch');\n  const btnQueueEl = document.querySelector('.btn__queue');\n\n  btnWatchEl.addEventListener('click', onLibraruWatch);\n  btnQueueEl.addEventListener('click', onLibraruQueue);\n\n  // відпрацювання кнопки проглянуте\n  function onLibraruWatch(ev) {\n    const btnEl = ev.target;\n\n    if (!load('watched')) {\n      const firstLocalSt = save('watched', []);\n    }\n\n    if (btnEl.getAttribute('data-show') === 'true') {\n      addWatchedLocalStorage(oneFilmById);\n    }\n    if (btnEl.getAttribute('data-show') === 'false') {\n      removeFromWatchedList(movie_id);\n    }\n\n    changeTextBtnWatch(btnEl);\n    showListWatched(ev);\n  }\n\n  function onLibraruQueue(ev) {\n    const btnEl = ev.target;\n\n    if (!load('queue')) {\n      const firstLocalSt = save('queue', []);\n    }\n\n    if (btnEl.getAttribute('data-show') === 'true') {\n      addQueueLocalStorage(oneFilmById);\n    }\n    if (btnEl.getAttribute('data-show') === 'false') {\n      removeFromQueueList(movie_id);\n    }\n\n    changeTextBtnQueue(btnEl);\n    showListQueue(ev);\n  }\n  // --------test-btn--------------\n}\nlet arrayFilmsWatched = [];\nlet localWatchListJson = [];\nlet watchList = [];\n\nfunction addWatchedLocalStorage(obj) {\n  // перевірка, чи є вже ця картка в сховищі\n\n  localWatchListJson = load('watched');\n\n  if (localWatchListJson) {\n    watchList = localWatchListJson;\n  }\n\n  let index1 = watchList.findIndex(film => film.id === Number(movie_id));\n  if (index1 != -1) {\n    return;\n  }\n\n  // перевірка, чи є вже ця картка в сховищі\n\n  arrayFilmsWatched = localWatchListJson;\n\n  arrayFilmsWatched.push(obj);\n\n  localStorage.setItem('watched', JSON.stringify(arrayFilmsWatched));\n\n  return arrayFilmsWatched;\n}\nfunction removeFromWatchedList(id) {\n  localWatchListJson = load('watched');\n\n  if (localWatchListJson) {\n    watchList = localWatchListJson;\n  }\n\n  remove('watched');\n\n  let index = watchList.findIndex(film => film.id === Number(movie_id));\n\n  watchList.splice(index, 1);\n  save('watched', watchList);\n}\n\n// ________ Add Remove QUEUE\n\nlet arrayFilmsQueue = [];\nlet localQueueListJson = [];\nlet queueList = [];\n\nfunction addQueueLocalStorage(obj) {\n  // перевірка, чи є вже ця картка в сховищі\n\n  localQueueListJson = load('queue');\n\n  if (localQueueListJson) {\n    queueList = localQueueListJson;\n  }\n\n  let index1 = queueList.findIndex(film => film.id === Number(movie_id));\n  if (index1 != -1) {\n    return;\n  }\n\n  // перевірка, чи є вже ця картка в сховищі\n\n  arrayFilmsQueue = localQueueListJson;\n\n  arrayFilmsQueue.push(obj);\n\n  localStorage.setItem('queue', JSON.stringify(arrayFilmsQueue));\n\n  return arrayFilmsQueue;\n}\nfunction removeFromQueueList(id) {\n  localQueueListJson = load('queue');\n\n  if (localQueueListJson) {\n    queueList = localQueueListJson;\n  }\n\n  remove('queue');\n\n  let index = queueList.findIndex(film => film.id === Number(movie_id));\n\n  queueList.splice(index, 1);\n  save('queue', queueList);\n}\n// ________ Add Remove QUEUE\n\n//  Ф-ції зміни тексту на кнопках\nfunction changeTextBtnQueue(btnEl) {\n  if (btnEl.getAttribute('data-show') === 'true') {\n    btnEl.innerText = 'Remove from queue';\n    btnEl.setAttribute('data-show', 'false');\n  } else {\n    btnEl.innerText = 'Add to queue';\n    btnEl.setAttribute('data-show', 'true');\n  }\n}\nfunction changeTextBtnWatch(btnEl) {\n  if (btnEl.getAttribute('data-show') === 'true') {\n    btnEl.innerText = 'Remove from watched';\n    btnEl.setAttribute('data-show', 'false');\n  } else {\n    btnEl.innerText = 'Add to watched';\n    btnEl.setAttribute('data-show', 'true');\n  }\n}\n\n// Ф-ція закриття модалки\nfunction onCloseBtn() {\n  modalEl.classList.remove('is-open');\n  document.body.classList.remove('stop-scrolling');\n}\nfunction closeBtn() {\n  const btnModalClos = document.querySelector('.close__button__modal');\n  btnModalClos.addEventListener('click', () => onCloseBtn());\n}\n// Close modal by Escape\nfunction closeEsc() {\n  window.addEventListener('keydown', closeModalByEsc);\n  function closeModalByEsc(e) {\n    if (e.code === 'Escape') {\n      onCloseBtn();\n      window.removeEventListener('keydown', closeModalByEsc);\n    }\n  }\n}\n\n// Close modal backdrop\nfunction backdropClose() {\n  const backdropEl = document.querySelector('.modal__backdrop');\n  backdropEl.addEventListener('click', onBackdropClick);\n  function onBackdropClick(evt) {\n    if (evt.currentTarget === evt.target) {\n      onCloseBtn();\n      backdropEl.removeEventListener('click', onBackdropClick);\n    }\n  }\n}\n\n// render film card\nfunction genresList(array) {\n  let array_genre_names = [];\n  let genre_namess = '';\n\n  for (const id of array) {\n    try {\n      const genre_name = localStorage.getItem(`genre`);\n      const arrayAllGenres = JSON.parse(genre_name);\n      const arrayIdGenres = arrayAllGenres.find(genre => genre.id == id);\n\n      array_genre_names.push(arrayIdGenres.name || 'n/a');\n\n      genre_namess = array_genre_names.join(', ');\n    } catch (error) {\n      console.error('Set state error: ', error.message);\n    }\n  }\n  return genre_namess;\n}\nfunction setPosters(poster_path) {\n  if (poster_path === null || poster_path === 'undefined') {\n    return 'https://wipfilms.net/wp-content/data/posters/tt0338683.jpg';\n  }\n\n  return `https://www.themoviedb.org/t/p/w500${poster_path}`;\n}\n\n// Ф-ція рендеру кнопок модалки\n\nfunction btnChangeWatch() {\n  localWatchListJson = load('watched');\n\n  if (localWatchListJson) {\n    watchList = localWatchListJson;\n  }\n\n  let index = watchList.findIndex(film => film.id === Number(movie_id));\n  // перевіряєм чи знайшло фільм, тру якщо Є ФІЛЬМ\n  if (index != -1) {\n    return '<button type=\"button\" class=\"film__button btn__watch\" data-id=\"${id}\" data-show=\"false\">Remove from watched</button>';\n  } else {\n    return '<button type=\"button\" class=\"film__button btn__watch\" data-id=\"${id}\" data-show=\"true\">Add to watched</button>';\n  }\n}\nfunction btnChangeQueue() {\n  localQueueListJson = load('queue');\n  if (localQueueListJson) {\n    queueList = localQueueListJson;\n  }\n  let index = queueList.findIndex(film => film.id === Number(movie_id));\n  if (index != -1) {\n    return '<button type=\"button\" class=\"film__button btn__queue\" data-id=\"${id}\" data-show=\"false\">Remove from queue</button>';\n  } else {\n    return '<button type=\"button\" class=\"film__button btn__queue\" data-id=\"${id}\" data-show=\"true\">Add to queue</button>';\n  }\n}\n\nfunction murckupCard({\n  poster_path,\n  title,\n  vote_average,\n  vote_count,\n  popularity,\n  original_title,\n  overview,\n  genre_ids,\n  name,\n  id,\n}) {\n  return (modalEl.innerHTML = `\n  <div class='modal__backdrop'></div>\n\n  <div class='modal__container'>\n    <div class='film__image'>\n      <img\n        class='image'\n        src='${setPosters(poster_path)}'\n        alt='${title || name}'\n        title=''\n      />\n    </div>\n\n    <div class='film__information'>\n      <div>\n        <h2 class='film__title'>${title || name}</h2>\n\n        <ul>\n          <li class='film__item'>\n            <p class='film__details'>Vote / Votes</p>\n            <p class='film__info--uper'>\n            <span class='film__rating--orange'>${vote_average.toFixed(1)}</span>\n            <span class='film__rating--divider'> / </span>\n            <span>${vote_count}</span>\n          </p>\n          </li>\n          <li class='film__item'>\n            <p class='film__details'>Popularity</p>\n            <p class='film__info--uper'>${popularity}</p>\n          </li>\n          <li class='film__item'>\n            <p class='film__details'>Original title</p>\n            <p class='film__info--uper'>${original_title || name}</p>\n          </li>\n          <li class='film__item'>\n            <p class='film__details'>Genre</p>\n            <p class='film__about__text'>${genresList(genre_ids)}\n            </p>\n          </li>\n        </ul>\n      </div>\n      <div>\n        <h3 class='film__about__title'>About</h3>\n        <p class='film__about__text'>${overview}\n        </p>\n      </div>\n      <div class='film__button__wrapper'>${btnChangeWatch()}\n\n        ${btnChangeQueue()}\n      </div>\n      <button\n        type='button'\n        class='close__button__modal'\n        data-action='close-modal'\n      >\n       <svg width=\"30\" height=\"30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"position: absolute\"><path d=\"m8 8 14 14M8 22 22 8\" stroke=\"#000\" stroke-width=\"2\"/></svg>\n    </button>\n    </div>\n  </div>\n  `);\n}\n","import { load, save, remove } from './gallery/local-st-load-remove-save';\nimport './gallery/modal-for-library';\n\nconst libGalleryRef = document.querySelector('.cards__list');\nconst btnWatched = document.querySelector('.btnWatched');\nconst btnQueue = document.querySelector('.btnQueue');\n\nbtnWatched.addEventListener('click', showListWatched);\nbtnQueue.addEventListener('click', showListQueue);\n\n onLoad();\n\nexport function showListWatched(e) {\n  e.preventDefault();\n\n  libGalleryRef.innerHTML = '';\n  btnWatched.classList.add('activ');\n  btnQueue.classList.remove('activ');\n\n  const listWatched = load('watched');\n\n  if (!listWatched) {\n  }\n\n  Render(listWatched);\n}\n\nexport function showListQueue(e) {\n  e.preventDefault();\n\n  libGalleryRef.innerHTML = '';\n  btnWatched.classList.remove('activ');\n  btnQueue.classList.add('activ');\n\n  const listQueue = load('queue');\n\n  if (!listQueue) {\n  }\n  Render(listQueue);\n}\n\nfunction Render(obj) {\n  \n  //debugger; \n  const markup = obj\n    .map(\n      ({\n        title,\n        name,\n        poster_path,\n        genre_ids,\n        id,\n        release_date,\n        first_air_date,\n      }) => {\n        let date = (release_date || first_air_date || 'n/a ').slice(0, 4);\n        return `<div class=\"movie-card\">\n                <img width=\"100%\" height=\"402\" class=\"movie-card__img\"\n                src=\"${setPosters(poster_path)}\" alt=\"\" data-id=\"${id}\"\n                loading=\"lazy\"/>\n\n                <div class=\"info\">\n                    <p class=\"info-item\">\n                        <b>${title || name}</b>\n                    </p>\n                    <p class=\"info-item\">\n                        <b>${genresList(genre_ids)} | ${date}</b>                  \n                </div>\n            </div>`;\n      }\n    )\n    .join('');\n  libGalleryRef.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction setPosters(poster_path) {\n  if (poster_path === null || poster_path === undefined) {\n    return 'https://i.pinimg.com/originals/74/3d/b2/743db230d891b47c1d8c66b161111b91.jpg';\n  }\n  return `https://www.themoviedb.org/t/p/w500${poster_path}`;\n}\n\nfunction genresList(array) {\n  let genre_names = '';\n  let foundGenres = 0;\n  const arrGenres = JSON.parse(localStorage.getItem('genre'));\n  for (const id of array) {\n    const genre_name = arrGenres.find(genre => id === genre.id);\n    //const genre_name = localStorage.getItem(`genre_${id}`);\n    if (!genre_name) {\n      continue;\n    }\n    if (genre_names) {\n      genre_names += ', ';\n    }\n    if (foundGenres === 2) {\n      genre_names += 'Others';\n      break;\n    }\n\n    foundGenres += 1;\n    genre_names += genre_name.name;\n  }\n  if (!genre_names) {\n    genre_names = 'unknown';\n  }\n  return genre_names;\n}\n\nfunction onLoad() {\n  libGalleryRef.innerHTML = '';\n  let listWt = load('watched');\n  \n  if (listWt && listWt.length>0) {    \n    Render(listWt);\n    btnWatched.classList.add('activ');\n    return;\n  }\n\n  let listQue = load('queue');\n  \n  if (listQue && listQue.length>0) {\n    Render(listQue);\n    btnQueue.classList.add('activ');\n    return;\n  }  \n  libGalleryRef.innerHTML = ` <div class=\"wrong-box\"> <p class=\"wrong-text\">Not Found</p>        \n <img class=\"img-wrong\" src=\"https://s3.amazonaws.com/stickers.wiki/laughingCStickers/1291222.512.webp\"></div>`\n}\n\n\n\n\n"],"names":["$cf564381aa41ae5b$var$movie_id","$c6c85498ad1844c9$export$11e63f7b0f3d9900","key","serializedState","localStorage","getItem","JSON","parse","undefined","err","console","error","$c6c85498ad1844c9$export$a1544dad697b423d","value","stringify","setItem","$c6c85498ad1844c9$export$cd7f480d6b8286c3","removeItem","$cf564381aa41ae5b$var$galleryFilm","document","querySelector","$cf564381aa41ae5b$var$modalEl","addEventListener","evt","preventDefault","target","nodeName","stopPropagation","closeModalByEsc","e","code","$cf564381aa41ae5b$var$onCloseBtn","window","removeEventListener","$cf564381aa41ae5b$var$closeEsc","classList","add","body","dataset","id","watchListJson","queueListJson","oneFilmById","concat","find","film","Number","param","poster_path","title","vote_average","vote_count","popularity","original_title","overview","genre_ids","name","innerHTML","$cf564381aa41ae5b$var$setPosters","toFixed","array","array_genre_names","genre_namess","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step1","_step","genre_name","arrayIdGenres","genre","push","join","message","_iterator","Symbol","iterator","next","done","_loop","return","$cf564381aa41ae5b$var$genresList","$cf564381aa41ae5b$var$localWatchListJson","$cf564381aa41ae5b$var$watchList","findIndex","$cf564381aa41ae5b$var$btnChangeWatch","$cf564381aa41ae5b$var$localQueueListJson","$cf564381aa41ae5b$var$queueList","$cf564381aa41ae5b$var$btnChangeQueue","$cf564381aa41ae5b$var$murckupCard","backdropEl","onBackdropClick","currentTarget","$cf564381aa41ae5b$var$backdropClose","btnWatchEl","btnQueueEl","ev","btnEl","getAttribute","obj","$cf564381aa41ae5b$var$arrayFilmsWatched","index","splice","$cf564381aa41ae5b$var$removeFromWatchedList","innerText","setAttribute","$cf564381aa41ae5b$var$changeTextBtnWatch","$93effc6fc56091ad$export$c8a29af874af5d6d","$cf564381aa41ae5b$var$arrayFilmsQueue","$cf564381aa41ae5b$var$removeFromQueueList","$cf564381aa41ae5b$var$changeTextBtnQueue","$93effc6fc56091ad$export$36c09851744f227d","remove","$93effc6fc56091ad$var$libGalleryRef","$93effc6fc56091ad$var$btnWatched","$93effc6fc56091ad$var$btnQueue","listWatched","$93effc6fc56091ad$var$Render","listQueue","markup","map","release_date","first_air_date","date","slice","$93effc6fc56091ad$var$setPosters","genre_names","foundGenres","arrGenres","$93effc6fc56091ad$var$genresList","insertAdjacentHTML","listWt","length","listQue","$93effc6fc56091ad$var$onLoad"],"version":3,"file":"header-library.a21bf131.js.map"}